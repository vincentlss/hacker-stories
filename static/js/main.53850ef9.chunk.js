(this["webpackJsonphacker-stories"]=this["webpackJsonphacker-stories"]||[]).push([[0],{21:function(e,t,n){e.exports=n(48)},26:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=(n(26),n(7)),i=n.n(u),l=n(18),s=n(20),m=n(2),E=n(3),p=n(19),f=n.n(p),d=n(5);n(47);n.p;var b=function(e,t){switch(t.type){case"STORIES_FETCH_INIT":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0,isError:!1});case"STORIES_FETCH_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,isError:!1,data:0===t.payload.page?t.payload.list:e.data.concat(t.payload.list),page:t.payload.page});case"STORIES_FETCH_FAILURE":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,isError:!0});case"REMOVE_STORY":return Object(m.a)(Object(m.a)({},e),{},{data:e.data.filter((function(e){return t.payload.objectID!==e.objectID}))});default:throw new Error}},h=function(e,t){return"".concat("https://hn.algolia.com/api/v1").concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(t)},y=function(e){return e.substring(e.lastIndexOf("?")+1,e.lastIndexOf("&")).replace("query=","")},O=function(e){var t=e.searchTerm,n=e.onSearchInput,a=e.onSearchSubmit;return r.a.createElement("form",{onSubmit:a,className:"search-form"},r.a.createElement(v,{id:"search",value:t,isFocused:!0,onInputChange:n},r.a.createElement("strong",null,"Search:")),r.a.createElement("button",{type:"submit",disabled:!t,className:"button button_large"},"Submit"))},v=function(e){var t=e.id,n=e.value,a=e.type,c=void 0===a?"text":a,o=e.onInputChange,u=e.isFocused,i=e.children,l=r.a.useRef();return r.a.useEffect((function(){u&&l.current.focus()}),[u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t,className:"label"},i),"\xa0",r.a.createElement("input",{ref:l,id:t,type:c,value:n,onChange:o,className:"input"}))},S={NONE:function(e){return e},TITLE:function(e){return Object(d.sortBy)(e,"title")},AUTHOR:function(e){return Object(d.sortBy)(e,"author")},COMMENT:function(e){return Object(d.sortBy)(e,"num_comments").reverse()},POINT:function(e){return Object(d.sortBy)(e,"points").reverse()}},g=function(e){var t=e.list,n=e.onRemoveItem,a=r.a.useState("NONE"),c=Object(E.a)(a,2),o=c[0],u=c[1],i=r.a.useState(!1),l=Object(E.a)(i,2),s=l[0],m=l[1],p=function(e){o===e?m(!s):(m(!1),u(e))},f=S[o],d=s?f(t).reverse():f(t);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{style:{width:"40%"}},r.a.createElement("button",{type:"button",onClick:function(){return p("TITLE")}},"Title")),r.a.createElement("span",{style:{width:"30%"}},r.a.createElement("button",{type:"button",onClick:function(){return p("AUTHOR")}},"Author")),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement("button",{type:"button",onClick:function(){return p("COMMENT")}},"Comments")),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement("button",{type:"button",onClick:function(){return p("POINT")}},"Points")),r.a.createElement("span",null,"Actions")),d.map((function(e){return r.a.createElement(I,{key:e.objectID,item:e,onRemoveItem:n})})))},I=function(e){var t=e.item,n=e.onRemoveItem;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{style:{width:"40%"}},r.a.createElement("a",{href:t.url},t.title)),r.a.createElement("span",{style:{width:"30%"}},t.author),r.a.createElement("span",{style:{width:"10%"}},t.num_comments),r.a.createElement("span",{style:{width:"10%"}},t.points),r.a.createElement("span",{style:{width:"10%"}},r.a.createElement("button",{type:"button",onClick:function(){return n(t)}},"Dismiss")))},T=function(){var e=function(e,t){var n=r.a.useState(localStorage.getItem(e)||t),a=Object(E.a)(n,2),c=a[0],o=a[1];return r.a.useEffect((function(){localStorage.setItem(e,c)}),[c,e]),[c,o]}("search","React"),t=Object(E.a)(e,2),n=t[0],a=t[1],c=r.a.useState([h(n,0)]),o=Object(E.a)(c,2),u=o[0],m=o[1],p=r.a.useReducer(b,{data:[],page:0,isLoading:!1,isError:!1}),d=Object(E.a)(p,2),v=d[0],S=d[1],I=r.a.useCallback(Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({type:"STORIES_FETCH_INIT"}),e.prev=1,t=u[u.length-1],e.next=5,f.a.get(t);case 5:n=e.sent,S({type:"STORIES_FETCH_SUCCESS",payload:{list:n.data.hits,page:n.data.page}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S({type:"STORIES_FETCH_FAILURE"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[u]);r.a.useEffect((function(){I()}),[I]);var T=function(e,t){var n=h(e,t);m(u.concat(n))},w=function(e){return Object(s.a)(new Set(e.slice().reverse())).reverse().slice(-5).map((function(e){return y(e)}))}(u);return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"headline-primary"},"My Hacker Stories"),r.a.createElement(O,{searchTerm:n,onSearchInput:function(e){a(e.target.value)},onSearchSubmit:function(e){T(n,0),e.preventDefault()}}),w.map((function(e,t){return r.a.createElement("button",{key:e+t,type:"button",onClick:function(){return function(e){a(e),T(e,0)}(e)}},e)})),v.isError&&r.a.createElement("p",null,"Something went wrong ..."),r.a.createElement(g,{list:v.data,onRemoveItem:function(e){S({type:"REMOVE_STORY",payload:e})}}),v.isLoading?r.a.createElement("p",null,"Loading ..."):r.a.createElement("button",{type:"button",onClick:function(){var e=u[u.length-1],t=y(e);T(t,v.page+1)}},"More"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.53850ef9.chunk.js.map